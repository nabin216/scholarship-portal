(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,81796,e=>{"use strict";e.i(47167);var s=e.i(43476),r=e.i(71645),a=e.i(18566);let o=r.forwardRef(function({title:e,titleId:s,...a},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":s},a),e?r.createElement("title",{id:s},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))});e.s(["default",0,()=>{let e=(0,a.useRouter)(),[t,n]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[l,d]=(0,r.useState)(!1),[i,c]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),w=e=>{let{name:s,value:r}=e.target;n(e=>({...e,[s]:r}))},h=async e=>{if(e.preventDefault(),d(!0),c(null),m(null),!t.currentPassword||!t.newPassword||!t.confirmPassword){c("All password fields are required"),d(!1);return}if(t.currentPassword===t.newPassword){c("New password cannot be the same as current password"),d(!1);return}if(t.newPassword!==t.confirmPassword){c("New passwords do not match"),d(!1);return}if(t.newPassword.length<8){c("New password must be at least 8 characters long"),d(!1);return}let s=/[a-zA-Z]/.test(t.newPassword),r=/\d/.test(t.newPassword),a=/[!@#$%^&*(),.?":{}|<>]/.test(t.newPassword);if(!(s&&(r||a))){c("Password must include letters and at least numbers or special characters"),d(!1);return}try{let e=localStorage.getItem("authToken");if(!e)throw Error("Authentication token not found");let s={old_password:t.currentPassword,new_password:t.newPassword,new_password2:t.confirmPassword};console.log("Password change request data:",JSON.stringify(s));let r=await fetch("https://api.scholarscanner.com/api/user/auth/change-password/",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok){console.error("Password change failed with status:",r.status);let e=await r.json();if(console.error("Error response:",e),e.old_password)throw Error(`Current password: ${e.old_password[0]}`);if(e.new_password)throw Error(`New password: ${e.new_password[0]}`);if(e.new_password2)throw Error(`Confirm password: ${e.new_password2[0]}`);else if(e.non_field_errors)throw Error(e.non_field_errors[0]);else if(e.detail)throw Error(e.detail);else if(Object.keys(e).length>0){let s=Object.entries(e)[0];throw Error(`${s[0]}: ${Array.isArray(s[1])?s[1][0]:s[1]}`)}else throw Error("Failed to change password. Please try again.")}let a=await r.json();console.log("Password change successful:",a),n({currentPassword:"",newPassword:"",confirmPassword:""}),m(a.message||"Password changed successfully")}catch(e){c(e instanceof Error?e.message:"An error occurred while changing password")}finally{d(!1)}};return(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6 max-w-xl mx-auto",children:[(0,s.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,s.jsx)(o,{className:"h-6 w-6 text-blue-700"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Change Password"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Update your account password"})]}),"      "]}),(0,s.jsx)("div",{className:"mt-6 max-w-xl mx-auto",children:(0,s.jsx)("form",{onSubmit:h,children:(0,s.jsxs)("div",{className:"shadow sm:rounded-md sm:overflow-hidden",children:[(0,s.jsxs)("div",{className:"px-4 py-5 bg-white space-y-6 sm:p-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700",children:"Current Password"}),(0,s.jsx)("input",{type:"password",name:"currentPassword",id:"currentPassword",value:t.currentPassword,onChange:w,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),"              ",(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,s.jsx)("input",{type:"password",name:"newPassword",id:"newPassword",value:t.newPassword,onChange:w,required:!0,minLength:8,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),"                ",(0,s.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[(0,s.jsx)("p",{children:"Password requirements:"}),(0,s.jsxs)("ul",{className:"list-disc pl-5 mt-1",children:[(0,s.jsx)("li",{children:"At least 8 characters long"}),(0,s.jsx)("li",{children:"Must include letters"}),(0,s.jsx)("li",{children:"Must include at least one number or special character"}),(0,s.jsx)("li",{children:"Cannot be the same as your current password"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,s.jsx)("input",{type:"password",name:"confirmPassword",id:"confirmPassword",value:t.confirmPassword,onChange:w,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),"            ",u&&(0,s.jsx)("div",{className:"px-4 py-3 bg-green-50 border-l-4 border-green-500 mb-4",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("p",{className:"text-sm font-medium text-green-800",children:u})})]})}),i&&(0,s.jsx)("div",{className:"px-4 py-3 bg-red-50 border-l-4 border-red-500 mb-4",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("p",{className:"text-sm font-medium text-red-800",children:i})})]})}),(0,s.jsxs)("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6",children:["              ",(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("button",{type:"button",onClick:()=>e.push("/profile"),className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Back to Profile"}),(0,s.jsx)("button",{type:"submit",disabled:l,className:"bg-blue-600 border border-transparent rounded-md shadow-sm py-2 px-4 inline-flex justify-center text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:l?"Updating...":"Update Password"})]})]})]})})})]})}],81796)}]);