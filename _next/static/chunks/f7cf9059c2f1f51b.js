(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43206,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(18566),l=e.i(59499),r=e.i(22016);let i=({currentScholarshipId:e})=>{let[t,l]=(0,a.useState)([]),[i,n]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{try{n(!0),d(null);let s=await fetch("https://api.scholarscanner.com/api/scholarships/?limit=4");if(!s.ok)throw Error("Failed to fetch related scholarships");let a=await s.json(),t=(a.results||a).filter(s=>s.id!==e).slice(0,4);l(t)}catch(e){console.error("Error fetching related scholarships:",e),d("Failed to load related scholarships")}finally{n(!1)}})()},[e]),i)?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Related Scholarships"}),(0,s.jsx)("div",{className:"space-y-4",children:[1,2,3,4].map(e=>(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"bg-gray-200 h-24 rounded-lg mb-2"}),(0,s.jsx)("div",{className:"bg-gray-200 h-4 rounded w-3/4 mb-1"}),(0,s.jsx)("div",{className:"bg-gray-200 h-3 rounded w-1/2"})]},e))})]}):c?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Related Scholarships"}),(0,s.jsx)("p",{className:"text-red-600 text-sm",children:c})]}):0===t.length?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Related Scholarships"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"No related scholarships found."})]}):(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Related Scholarships"}),(0,s.jsx)("div",{className:"space-y-4",children:t.map(e=>{let a=new Date(e.deadline)<new Date;return(0,s.jsx)(r.default,{href:`/scholarships/scholarshipdetails?id=${e.id}`,className:"block group hover:bg-gray-50 rounded-lg p-3 transition-colors",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-16 h-16 bg-gray-200 rounded-lg overflow-hidden",children:(0,s.jsx)("img",{src:e.image||"/images/providers/scholarship-default.jpg",alt:e.title,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/images/providers/scholarship-default.jpg"}})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-gray-900 group-hover:text-blue-600 transition-colors line-clamp-2 leading-tight mb-1",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:e.provider}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsx)("span",{className:"text-gray-500",children:e.country_name}),(0,s.jsx)("span",{className:`font-medium ${a?"text-red-600":"text-green-600"}`,children:new Date(e.deadline).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})]})},e.id)})}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,s.jsx)(r.default,{href:"/scholarships/search",className:"block text-center text-sm font-medium text-blue-600 hover:text-blue-800 transition-colors",children:"View All Scholarships â†’"})})]})},n=()=>{var e;let n=(0,t.useSearchParams)();(0,t.useRouter)();let{user:c,isAuthenticated:d}=(0,l.useAuth)(),[o,h]=(0,a.useState)(null),[m,x]=(0,a.useState)(!0),[p,g]=(0,a.useState)(null),[u,f]=(0,a.useState)(!1),[j,b]=(0,a.useState)(!1),[y,N]=(0,a.useState)(!1),[w,v]=(0,a.useState)({requirements:!1}),k=n?.get("id");(0,a.useEffect)(()=>{(async()=>{if(!k){g("No scholarship ID provided"),x(!1);return}try{let e=await fetch(`https://api.scholarscanner.com/api/scholarships/${k}/`);if(!e.ok){404===e.status?g("Scholarship not found"):g("Failed to fetch scholarship details"),x(!1);return}let s=await e.json();h(s)}catch(e){console.error("Error fetching scholarship:",e),g("An error occurred while fetching scholarship details")}finally{x(!1)}})()},[k]),(0,a.useEffect)(()=>{(async()=>{if(d&&k)try{let e=localStorage.getItem("authToken");if(!e)return;let s=await fetch("https://api.scholarscanner.com/api/user/saved-scholarships/",{headers:{Authorization:`Bearer ${e}`}});if(s.ok){let e=await s.json(),a=(e.results||e).map(e=>e.scholarship);f(a.includes(parseInt(k)))}let a=await fetch("https://api.scholarscanner.com/api/user/applications/",{headers:{Authorization:`Bearer ${e}`}});if(a.ok){let e=await a.json(),s=(e.results||e).map(e=>e.scholarship);N(s.includes(parseInt(k)))}}catch(e){console.error("Error checking scholarship status:",e)}})()},[d,k]);let S=async()=>{if(!d)return void alert("Please log in to save scholarships");b(!0);try{let e=localStorage.getItem("authToken");if(!e)throw Error("Authentication token not found");if(u){let s=await fetch("https://api.scholarscanner.com/api/user/saved-scholarships/",{headers:{Authorization:`Bearer ${e}`}});if(s.ok){let a=await s.json(),t=(a.results||a).find(e=>e.scholarship===parseInt(k));t&&(await fetch(`https://api.scholarscanner.com/api/user/saved-scholarships/${t.id}/`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}})).ok&&f(!1)}}else(await fetch("https://api.scholarscanner.com/api/user/saved-scholarships/",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({scholarship:parseInt(k)})})).ok&&f(!0)}catch(e){console.error("Error saving scholarship:",e),alert("An error occurred while saving the scholarship")}finally{b(!1)}},_=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});if(m)return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsx)("div",{className:"flex justify-center items-center min-h-[400px]",children:(0,s.jsx)("div",{className:"text-lg text-gray-600",children:"Loading scholarship details..."})})})});if(p||!o)return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-red-600 text-lg mb-4",children:p||"Scholarship not found"}),(0,s.jsx)(r.default,{href:"/scholarships/search",className:"text-blue-600 hover:text-blue-800 underline",children:"Back to Search"})]}),"        "]})});let A=new Date(o.deadline)<new Date;return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6 px-2 sm:px-4 py-4 sm:py-8 ml-0 lg:ml-8 xl:ml-16",children:[(0,s.jsxs)("div",{className:"w-full lg:w-2/3 max-w-4xl",children:[(0,s.jsx)("div",{className:"mb-4 sm:mb-6",children:(0,s.jsxs)(r.default,{href:"/scholarships/search",className:"text-blue-600 hover:text-blue-800 flex items-center gap-2 text-sm sm:text-base",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Search"]})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:["          ",(0,s.jsxs)("div",{className:"relative",children:[o.image&&(0,s.jsx)("div",{className:"w-full h-48 sm:h-64 bg-gray-200",children:(0,s.jsx)("img",{src:o.image,alt:o.title,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/images/providers/scholarship-default.jpg"}})}),"              ",(0,s.jsx)("div",{className:"absolute top-2 sm:top-4 right-2 sm:right-4 flex flex-col gap-2 max-w-[120px] sm:max-w-none",children:A&&(0,s.jsx)("span",{className:"bg-red-500 text-white px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium text-center",children:"Deadline Passed"})})]}),"          ",(0,s.jsxs)("div",{className:"p-3 sm:p-6 lg:p-8",children:["            ",(0,s.jsxs)("div",{className:"mb-4 sm:mb-6",children:[(0,s.jsx)("h1",{className:"text-lg sm:text-2xl lg:text-3xl font-bold text-gray-900 mb-2 sm:mb-4 leading-tight pr-16 sm:pr-40",children:o.title}),(0,s.jsxs)("div",{className:"block sm:hidden space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-gray-100",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-700",children:"Provider:"}),(0,s.jsx)("span",{className:"text-gray-600 text-right max-w-[60%] truncate",children:o.provider})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-gray-100",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-700",children:"Country:"}),(0,s.jsx)("span",{className:"text-gray-600",children:o.country_name})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-gray-100",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-700",children:"Deadline:"}),(0,s.jsx)("span",{className:`font-medium ${A?"text-red-600":"text-gray-600"}`,children:_(o.deadline)})]}),o.open_date&&(0,s.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-700",children:"Open Date:"}),(0,s.jsx)("span",{className:"text-gray-600",children:_(o.open_date)})]})]}),"              ",(0,s.jsxs)("div",{className:"hidden sm:grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-700 w-20",children:"Provider:"}),(0,s.jsx)("span",{className:"text-gray-600 break-words",children:o.provider})]}),(0,s.jsxs)("div",{className:"flex flex-row items-center",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-700 w-20",children:"Country:"}),(0,s.jsx)("span",{className:"text-gray-600",children:o.country_name})]}),(0,s.jsxs)("div",{className:"flex flex-row items-center",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-700 w-20",children:"Deadline:"}),(0,s.jsx)("span",{className:`font-medium break-words ${A?"text-red-600":"text-gray-600"}`,children:_(o.deadline)})]}),o.open_date&&(0,s.jsxs)("div",{className:"flex flex-row items-center",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-700 w-20",children:"Open Date:"}),(0,s.jsx)("span",{className:"text-gray-600 break-words",children:_(o.open_date)})]})]})]}),"            ",(0,s.jsxs)("div",{className:"space-y-3 mb-6 sm:mb-8",children:[o.levels&&o.levels.length>0&&(0,s.jsxs)("div",{className:"text-sm sm:text-base flex flex-wrap",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-700 w-36 lg:w-40 flex-shrink-0",children:"Academic Levels:"}),(0,s.jsx)("span",{className:"text-gray-600 break-words flex-1",children:o.levels.map((e,a)=>(0,s.jsxs)("span",{children:[e.name,a<o.levels.length-1?", ":""]},e.id))})]}),o.field_of_study&&o.field_of_study.length>0&&(0,s.jsxs)("div",{className:"text-sm sm:text-base flex flex-wrap",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-700 w-36 lg:w-40 flex-shrink-0",children:"Fields of Study:"}),(0,s.jsx)("span",{className:"text-gray-600 break-words flex-1",children:o.field_of_study.map((e,a)=>(0,s.jsxs)("span",{children:[e.name,a<o.field_of_study.length-1?", ":""]},e.id))})]}),o.scholarship_category&&o.scholarship_category.length>0&&(0,s.jsxs)("div",{className:"text-sm sm:text-base flex flex-wrap",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-700 w-36 lg:w-40 flex-shrink-0",children:"Categories:"}),(0,s.jsx)("span",{className:"text-gray-600 break-words flex-1",children:o.scholarship_category.map((e,a)=>(0,s.jsxs)("span",{children:[e.name,a<o.scholarship_category.length-1?", ":""]},e.id))})]}),o.fund_type&&o.fund_type.length>0&&(0,s.jsxs)("div",{className:"text-sm sm:text-base flex flex-wrap",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-700 w-36 lg:w-40 flex-shrink-0",children:"Fund Types:"}),(0,s.jsx)("span",{className:"text-gray-600 break-words flex-1",children:o.fund_type.map((e,a)=>(0,s.jsxs)("span",{children:[e.name,a<o.fund_type.length-1?", ":""]},e.id))})]}),o.sponsor_type&&o.sponsor_type.length>0&&(0,s.jsxs)("div",{className:"text-sm sm:text-base flex flex-wrap",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-700 w-36 lg:w-40 flex-shrink-0",children:"Sponsor Types:"}),(0,s.jsx)("span",{className:"text-gray-600 break-words flex-1",children:o.sponsor_type.map((e,a)=>(0,s.jsxs)("span",{children:[e.name,a<o.sponsor_type.length-1?", ":""]},e.id))})]}),o.language_requirement&&o.language_requirement.length>0&&(0,s.jsxs)("div",{className:"text-sm sm:text-base flex flex-wrap",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-700 w-36 lg:w-40 flex-shrink-0",children:"Language Requirements:"}),(0,s.jsx)("span",{className:"text-gray-600 break-words flex-1",children:o.language_requirement.map((e,a)=>(0,s.jsxs)("span",{children:[e.name,a<o.language_requirement.length-1?", ":""]},e.id))})]})]}),"            ",(0,s.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-4",children:"Description"}),(0,s.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,s.jsx)("div",{className:"text-gray-700 leading-relaxed whitespace-pre-line text-sm sm:text-base",children:(e=o.description)?e.replace(/<br\s*\/?>/gi,"\n").replace(/<\/p>/gi,"\n\n").replace(/<p[^>]*>/gi,"").replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\n\s*\n/g,"\n\n").trim():""})})]}),o.requirements&&(0,s.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,s.jsxs)("button",{className:"w-full flex items-center justify-between text-left focus:outline-none",onClick:()=>v(e=>({...e,requirements:!e.requirements})),children:[(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Requirements"}),(0,s.jsx)("span",{className:"text-gray-500 text-xl",children:w.requirements?"âˆ’":"+"})]}),w.requirements&&(0,s.jsx)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:(0,s.jsx)("div",{className:"prose prose-sm sm:prose-base max-w-none text-gray-700",children:(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:o.requirements}})})})]}),"            ",(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:gap-4 pt-4 sm:pt-6 border-t border-gray-200",children:[(0,s.jsx)("div",{className:"sm:flex-shrink-0",children:y?(0,s.jsx)("button",{disabled:!0,className:"w-full sm:w-auto bg-green-600 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold cursor-not-allowed text-sm sm:text-base",children:"âœ“ Applied"}):(0,s.jsx)("a",{href:o.application_url,target:"_blank",rel:"noopener noreferrer",className:"block w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold text-center transition-colors text-sm sm:text-base",children:"Apply Now"})}),"              ",d&&(0,s.jsx)("button",{onClick:S,disabled:j,className:`w-full sm:w-auto px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold transition-colors text-sm sm:text-base ${u?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-yellow-400 hover:bg-yellow-500 text-gray-900"} ${j?"opacity-50 cursor-not-allowed":""}`,children:j?"Saving...":u?"âœ“ Saved":"ðŸ’¾ Save for Later"})]}),!d&&(0,s.jsx)("div",{className:"mt-3 sm:mt-4 p-3 sm:p-4 bg-blue-50 rounded-lg",children:(0,s.jsxs)("p",{className:"text-blue-800 text-xs sm:text-sm",children:[(0,s.jsx)(r.default,{href:"/Authentication/login",className:"underline hover:no-underline",children:"Log in"})," ","to save scholarships and track your applications.                "]})}),"          "]})]})]}),(0,s.jsx)("div",{className:"w-full lg:w-1/3 lg:max-w-sm",children:(0,s.jsx)(i,{currentScholarshipId:o.id})})]})})};e.s(["default",0,()=>(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(n,{})})])}]);