(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,91508,e=>{"use strict";var r=e.i(43476),s=e.i(59499);e.s(["default",0,({text:e="Sign in with Google",className:t=""})=>{let{loginWithGoogle:a}=(0,s.useAuth)();return(0,r.jsxs)("button",{type:"button",onClick:()=>a(),className:`w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${t}`,children:[(0,r.jsx)("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",width:"24",height:"24",children:(0,r.jsxs)("g",{transform:"matrix(1, 0, 0, 1, 27.009001, -39.238998)",children:[(0,r.jsx)("path",{fill:"#4285F4",d:"M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z"}),(0,r.jsx)("path",{fill:"#34A853",d:"M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.444 63.239 -14.754 63.239 Z"}),(0,r.jsx)("path",{fill:"#FBBC05",d:"M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.724 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z"}),(0,r.jsx)("path",{fill:"#EA4335",d:"M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.789 L -6.734 42.369 C -8.804 40.429 -11.514 39.239 -14.754 39.239 C -19.444 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z"})]})}),e]})}])},2626,e=>{"use strict";var r=e.i(43476),s=e.i(71645),t=e.i(22016),a=e.i(18566),l=e.i(59499),i=e.i(91508),o=e.i(5257);function n(){let[e,n]=(0,s.useState)("register"),[d,c]=(0,s.useState)({fullName:"",email:"",password:"",confirmPassword:""}),[u,m]=(0,s.useState)({email:"",otp:""}),[h,x]=(0,s.useState)(null),[p,f]=(0,s.useState)(null),[g,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),w=(0,a.useRouter)(),{loginWithGoogle:v}=(0,l.useAuth)(),N=e=>{let{name:r,value:s}=e.target;c({...d,[r]:s})},C=async e=>{b(!0),x(null),f(null);try{let r=await fetch(o.ApiService.getApiUrl("user/auth/send-verification-email/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!r.ok){let e=await r.json();throw Error(e.detail||e.error||"Failed to send verification email")}let s=await r.json();f(s.message||"Verification code sent to your email!"),m({email:e,otp:""}),n("verify")}catch(e){x(e instanceof Error?e.message:"An error occurred while sending verification email")}finally{b(!1)}},S=async()=>{b(!0),x(null);try{let e=await fetch(o.ApiService.getApiUrl("user/auth/verify-otp/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u.email,otp_code:u.otp})});if(!e.ok){let r=await e.json();throw Error(r.detail||r.error||"Invalid verification code")}await k()}catch(e){x(e instanceof Error?e.message:"An error occurred during verification")}finally{b(!1)}},k=async()=>{try{let[e,...r]=d.fullName.trim().split(" "),s=r.join(" "),t=await fetch(o.ApiService.getApiUrl("user/auth/register/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u.email,password:d.password,password2:d.confirmPassword,full_name:d.fullName,first_name:e,last_name:s||"",otp_code:u.otp})});if(!t.ok){let e=await t.json(),r=e.detail||Object.values(e).map(e=>Array.isArray(e)?e.join(", "):e).join(", ");throw Error(r||"Registration failed")}let a=await t.json();a.access&&(localStorage.setItem("authToken",a.access),a.refresh&&localStorage.setItem("refreshToken",a.refresh)),f("Registration successful! Redirecting to your profile..."),setTimeout(()=>{w.push("/profile")},2e3)}catch(e){x(e instanceof Error?e.message:"An error occurred during registration")}},A=async()=>{j(!0),x(null),f(null);try{let e=await fetch(o.ApiService.getApiUrl("user/auth/resend-otp/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u.email})});if(!e.ok){let r=await e.json();throw Error(r.detail||r.error||"Failed to resend verification code")}let r=await e.json();f(r.message||"New verification code sent to your email!"),m({...u,otp:""})}catch(e){x(e instanceof Error?e.message:"An error occurred while resending verification code")}finally{j(!1)}},L=async r=>{if(r.preventDefault(),x(null),f(null),"register"===e){if(d.password!==d.confirmPassword)return void x("Passwords do not match");if(d.password.length<8)return void x("Password must be at least 8 characters long");await C(d.email)}else if("verify"===e){if(6!==u.otp.length)return void x("Please enter a valid 6-digit verification code");await S()}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"register"===e?"Create a new account":"Verify your email"}),(0,r.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"register"===e?(0,r.jsxs)(r.Fragment,{children:["Or"," ",(0,r.jsx)(t.default,{href:"/Authentication/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"sign in to your account"})]}):`We've sent a 6-digit verification code to ${u.email}`})]}),h&&(0,r.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm text-red-700",children:h})})]})}),p&&(0,r.jsx)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm text-green-700",children:p})})]})}),"register"===e?(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:L,children:[(0,r.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"full-name",className:"sr-only",children:"Full Name"}),(0,r.jsx)("input",{id:"full-name",name:"fullName",type:"text",autoComplete:"name",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Full Name",value:d.fullName,onChange:N})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),(0,r.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:d.email,onChange:N})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,r.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password (min. 8 characters)",value:d.password,onChange:N})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm Password"}),(0,r.jsx)("input",{id:"confirm-password",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Confirm Password",value:d.confirmPassword,onChange:N})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:g,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white ${g?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),"Sending verification email..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,r.jsxs)("svg",{className:"h-5 w-5 text-blue-500 group-hover:text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),(0,r.jsx)("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]})}),"Send Verification Email"]})})}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Or register with"})})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(i.default,{text:"Sign up with Google"})})]})]}):(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:L,children:[(0,r.jsx)("div",{className:"rounded-md shadow-sm",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Code"}),(0,r.jsx)("input",{id:"otp",name:"otp",type:"text",autoComplete:"one-time-code",required:!0,maxLength:6,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm text-center text-2xl tracking-widest",placeholder:"000000",value:u.otp,onChange:e=>{let{value:r}=e.target,s=r.replace(/\D/g,"").slice(0,6);m({...u,otp:s})}}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Enter the 6-digit code sent to your email address"})]})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("button",{type:"submit",disabled:g||6!==u.otp.length,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white ${g||6!==u.otp.length?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),"Verifying..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-blue-500 group-hover:text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),"Verify & Complete Registration"]})}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("button",{type:"button",onClick:A,disabled:y,className:"text-sm text-blue-600 hover:text-blue-500 font-medium disabled:text-gray-400",children:y?"Sending...":"Resend Code"}),(0,r.jsx)("button",{type:"button",onClick:()=>{n("register"),x(null),f(null),m({email:"",otp:""})},className:"text-sm text-gray-600 hover:text-gray-500 font-medium",children:"Change Email"})]})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Didn't receive the code? Check your spam folder or"," ",(0,r.jsx)("button",{type:"button",onClick:A,disabled:y,className:"text-blue-600 hover:text-blue-500 font-medium",children:"try again"})]})})]})]})})}e.s(["default",()=>n])}]);