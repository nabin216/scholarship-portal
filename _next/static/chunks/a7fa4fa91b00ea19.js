(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59671,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(22016),a=e.i(59499);function l(){let e,l,i,{user:o}=(0,a.useAuth)(),[n,c]=(0,t.useState)([]),[d,h]=(0,t.useState)(!0),[x,m]=(0,t.useState)(null),[p,u]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{h(!0),m(null);try{let e=localStorage.getItem("authToken");if(!e){m("You must be logged in to view saved scholarships"),h(!1);return}let s=await fetch("https://api.scholarscanner.com/api/user/saved-scholarships/",{headers:{Authorization:`Bearer ${e}`}});if(!s.ok)return void(401===s.status?m("Your session has expired. Please log in again."):m(`Failed to fetch saved scholarships: ${s.status}`));let t=await s.json();console.log("Saved scholarships API response:",t),c(t.results||[])}catch(e){console.error("Error fetching saved scholarships:",e),m(e instanceof Error?e.message:"An error occurred while fetching saved scholarships")}finally{h(!1)}})()},[]);let g=async e=>{try{m(null),u(null);let s=localStorage.getItem("authToken");if(!s)throw Error("Authentication token not found");if(!(await fetch(`https://api.scholarscanner.com/api/user/saved-scholarships/${e}/`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}})).ok)throw Error("Failed to remove scholarship");c(s=>s.filter(s=>s.id!==e)),u("Scholarship removed successfully"),setTimeout(()=>u(null),3e3)}catch(e){console.error("Error removing scholarship:",e),m(e instanceof Error?e.message:"An error occurred while removing the scholarship")}},f=async e=>{try{m(null),u(null);let s=localStorage.getItem("authToken");if(!s)throw Error("Authentication token not found");let t=await fetch("https://api.scholarscanner.com/api/user/applications/",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({scholarship:e.scholarship_details.id,status:"pending",notes:"Applied from saved scholarships"})});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.detail||"Failed to create application")}if(!(await fetch(`https://api.scholarscanner.com/api/user/saved-scholarships/${e.id}/`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}})).ok)throw Error("Failed to remove from saved scholarships");c(s=>s.filter(s=>s.id!==e.id)),u("Scholarship marked as applied and moved to applications!"),setTimeout(()=>u(null),3e3)}catch(e){console.error("Error marking scholarship as applied:",e),m(e instanceof Error?e.message:"An error occurred while marking the scholarship as applied")}};return d?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"})})})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"container mx-auto px-4",children:["        ",(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex items-center space-x-4 mb-2",children:(0,s.jsxs)(r.default,{href:"/profile",className:"text-blue-600 hover:text-blue-800 flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Profile"]})}),"              ",(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Saved Scholarships"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your bookmarked scholarships"}),n.length>0&&(0,s.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[n.length," scholarship",1!==n.length?"s":""," saved"]}),(e=new Date,l=n.filter(s=>{if(!s.scholarship_details?.deadline)return!1;let t=Math.ceil((new Date(s.scholarship_details.deadline).getTime()-e.getTime())/864e5);return t>=0&&t<=3}).length,i=n.filter(s=>!!s.scholarship_details?.deadline&&0>Math.ceil((new Date(s.scholarship_details.deadline).getTime()-e.getTime())/864e5)).length,(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-xs",children:[l>0&&(0,s.jsxs)("span",{className:"flex items-center text-orange-600",children:[(0,s.jsx)("svg",{className:"h-3 w-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),l," urgent deadline",1!==l?"s":""]}),i>0&&(0,s.jsxs)("span",{className:"flex items-center text-red-600",children:[(0,s.jsx)("svg",{className:"h-3 w-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),i," expired"]})]}))]})]}),(0,s.jsx)(r.default,{href:"/scholarships/search",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Find More Scholarships"})]})}),x&&(0,s.jsx)("div",{className:"mb-6 bg-red-50 border-l-4 border-red-400 p-4",children:(0,s.jsx)("p",{className:"text-sm text-red-700",children:x})}),p&&(0,s.jsx)("div",{className:"mb-6 bg-green-50 border-l-4 border-green-400 p-4",children:(0,s.jsx)("p",{className:"text-sm text-green-700",children:p})}),(0,s.jsx)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:n.length>0?(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsxs)("thead",{className:"bg-gray-50",children:["                  ",(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scholarship"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Provider"}),"                    ",(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deadline Status"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Saved"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider text-center",children:"Actions"})]})]}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>{let t=e.scholarship_details;if(!t)return(0,s.jsx)("tr",{className:"hover:bg-gray-50",children:(0,s.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-red-600",children:"Error: Missing scholarship details"})},e.id);let a=Math.ceil((new Date(t.deadline).getTime()-new Date().getTime())/864e5),l=(()=>{if(a<0){let e=Math.abs(a);return{text:`Expired ${e} day${1===e?"":"s"} ago`,bgColor:"bg-red-100",textColor:"text-red-800",urgent:!0}}if(0===a)return{text:"Due Today!",bgColor:"bg-red-100",textColor:"text-red-800",urgent:!0};if(1===a)return{text:"Due Tomorrow",bgColor:"bg-orange-100",textColor:"text-orange-800",urgent:!0};if(a<=3)return{text:`${a} days left`,bgColor:"bg-orange-100",textColor:"text-orange-800",urgent:!0};if(a<=7)return{text:`${a} days left`,bgColor:"bg-yellow-100",textColor:"text-yellow-800",urgent:!1};else if(a<=30)return{text:`${a} days left`,bgColor:"bg-blue-100",textColor:"text-blue-800",urgent:!1};else return{text:`${a} days left`,bgColor:"bg-green-100",textColor:"text-green-800",urgent:!1}})();return(0,s.jsxs)("tr",{className:`hover:bg-gray-50 ${l.urgent?"bg-red-50 border-l-4 border-red-400":""}`,children:[(0,s.jsxs)("td",{className:"px-6 py-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(0,s.jsx)(r.default,{href:`/scholarships/scholarshipdetails?id=${t.id}`,className:"hover:text-blue-600",children:t.title})}),(0,s.jsx)("div",{className:"text-sm text-gray-500 line-clamp-1",children:t.description})]}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("div",{className:"text-sm text-gray-500",children:t.provider})}),"                        ",(0,s.jsxs)("td",{className:"px-6 py-4",children:[(0,s.jsx)("div",{className:"text-sm text-gray-900 mb-1",children:new Date(t.deadline).toLocaleDateString()}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("span",{className:`px-2 py-1 inline-flex text-xs leading-4 font-semibold rounded-full ${l.bgColor} ${l.textColor}`,children:l.text}),l.urgent&&(0,s.jsx)("svg",{className:"h-4 w-4 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})]})]}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.date_saved).toLocaleDateString()})}),(0,s.jsx)("td",{className:"px-6 py-4 text-center",children:(0,s.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,s.jsxs)(r.default,{href:`/scholarships/scholarshipdetails?id=${t.id}`,className:"text-blue-600 hover:text-blue-900 p-1",title:"View Details",children:[(0,s.jsx)("span",{className:"sr-only",children:"View"}),(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})]}),(0,s.jsxs)("button",{onClick:()=>f(e),className:"text-green-600 hover:text-green-900 p-1",title:"Mark as Applied",children:[(0,s.jsx)("span",{className:"sr-only",children:"Mark as Applied"}),(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),(0,s.jsxs)("button",{onClick:()=>g(e.id),className:"text-red-600 hover:text-red-900 p-1",title:"Remove",children:[(0,s.jsx)("span",{className:"sr-only",children:"Remove"}),(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})]})]})})]},e.id)})})]})}):(0,s.jsxs)("div",{className:"text-center py-16 px-4",children:[(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No saved scholarships"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"You haven't saved any scholarships yet."}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsxs)(r.default,{href:"/scholarships/search",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,s.jsx)("svg",{className:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),"Find Scholarships"]})})]})})]})})}e.s(["default",()=>l])}]);